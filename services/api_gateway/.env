# services\api_gateway\.env
# Основные настройки приложения
APP_NAME=api-gateway
APP_VERSION=1.0.0
ENVIRONMENT=development  # development/production/testing
DEBUG=True

# Настройки API
API_V1_PREFIX=/api/v1
OPENAPI_URL=/openapi.json
DOCS_URL=/docs
REDOC_URL=/redoc

# Секреты
# В продакшене используйте надежные секретные ключи
SECRET_KEY=your-super-secret-key-here
JWT_SECRET_KEY=your-jwt-secret-key-here
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS настройки
CORS_ORIGINS=["http://localhost:3000","http://localhost:8000"]
CORS_ALLOW_CREDENTIALS=True
CORS_ALLOW_METHODS=["*"]
CORS_ALLOW_HEADERS=["*"]

# База данных PostgreSQL
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-strong-password-here
POSTGRES_DB=api_gateway

# Настройки пула соединений с БД
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=1800
DB_ECHO_LOG=False

# Redis настройки
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password-here
REDIS_DB=0

# Настройки кэширования
CACHE_ENABLED=True
CACHE_TTL_SECONDS=300

# Настройки rate limiting
RATE_LIMIT_ENABLED=True
RATE_LIMIT_PER_MINUTE=100

# Настройки балансировщика нагрузки
LOAD_BALANCER_STRATEGY=round_robin
HEALTH_CHECK_INTERVAL_SECONDS=30
HEALTH_CHECK_TIMEOUT_SECONDS=5

# Настройки прокси
PROXY_TIMEOUT_SECONDS=60
PROXY_CONNECT_TIMEOUT_SECONDS=5
PROXY_MAX_RETRIES=3
PROXY_RETRY_DELAY_SECONDS=1

# Конфигурация микросервисов
# Auth Service
AUTH_SERVICE_HOST=auth-service
AUTH_SERVICE_PORT=8001
AUTH_SERVICE_HEALTH_CHECK_URL=/health

# Users Service
USERS_SERVICE_HOST=users-service
USERS_SERVICE_PORT=8002
USERS_SERVICE_HEALTH_CHECK_URL=/health

# Products Service
PRODUCTS_SERVICE_HOST=products-service
PRODUCTS_SERVICE_PORT=8003
PRODUCTS_SERVICE_HEALTH_CHECK_URL=/health

# Orders Service
ORDERS_SERVICE_HOST=orders-service
ORDERS_SERVICE_PORT=8004
ORDERS_SERVICE_HEALTH_CHECK_URL=/health

# Настройки логирования
LOG_LEVEL=INFO  # DEBUG/INFO/WARNING/ERROR/CRITICAL
LOG_FORMAT=json  # json/text
LOG_FILE_PATH=/var/log/api-gateway/app.log

# Метрики и мониторинг
METRICS_ENABLED=True
METRICS_HOST=localhost
METRICS_PORT=9090

# Настройки трейсинга
TRACING_ENABLED=True
JAEGER_HOST=jaeger
JAEGER_PORT=6831

# SSL/TLS настройки (если требуется)
SSL_ENABLED=False
SSL_CERT_PATH=/path/to/cert.pem
SSL_KEY_PATH=/path/to/key.pem

# Настройки безопасности
ALLOWED_HOSTS=["*"]
MAX_REQUEST_SIZE_MB=10
REQUEST_TIMEOUT_SECONDS=30

# Настройки для тестирования
TEST_DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/api_gateway_test